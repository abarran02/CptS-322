{% extends 'base.html' %}
{% load posts}
{% block title %}Food_Tracker{% endblock %}
{% block content %}

 
<!--
<h1>Test Button</h1>
<button id="button">Click me</button>
<p id="displayText"></p>
<script>
let test = document.getElementById("button"); 
test.addEventListener("click",display)
function display(){
    document.getElementById("displayText").innerHTML = "Hello World"
}
</script>
-->

<div class="Container">
    <h3>Add Foods</h3> 
    <div class="resturant_dropdown">
        <label for="">Pick a Resturant</label>
        <select name="display_resturants" id="display_resturants" onchange="populate('display_resturants', 'display_foods')">
        </select>
    </div>
    <div class="food_dropdown">
        <label>Pick a Food</label>
        <select name="display_foods" id="display_foods">
        </select>
    </div>

    <script data-resturant_name="{{restName}}"> // imports JSON file data
        const rest_data = document.currentScript.dataset;
        const resturant = rest_data.resturant_name;
        const obj_rest = JSON.parse(resturant);  // converts JSON file to a parseable object with JSON.parse()
        
        if (resturant.length == 0){ // show no option if at the end of list
            document.getElementById("resturant_name").innerHTML = "<option></option>" // sets the select option to null value
        }
        else{
            var names = "";
            for(rest_names in obj_rest){ // loops though and changes the names string to each value in obj i.e Chiptole to KFC
                names += "<option value='"+ rest_names +"'>" + rest_names + "</option>";
            }
        }
        
        document.getElementById("display_resturants").innerHTML = names; //Sets the Id for select to that name

        function populate(s1,s2){
            var s1 = document.getElementById(s1);
            var s2 = document.getElementById(s2);
        
            s2.innerHTML = ""
            //document.write(s1.value);
            current_resturant = s1.value;

        
            /*
            if(s1.value == rest_names){
                for(nm in rest_names){
                    document.write(nm);
                }
            }
            */
        }
    </script>
    
</div>
{% endblock %}